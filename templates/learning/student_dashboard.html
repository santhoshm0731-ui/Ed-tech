{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container py-4">
  <h4>Welcome, {{ profile.user.first_name|default:profile.user.username }}</h4>
  <p>School: {{ profile.school.name }} • Points: <strong>{{ profile.points }}</strong> • Level: <strong>{{ profile.current_level }}</strong></p>

  <h5>Levels</h5>
  <div class="row g-3">
    {% for level in levels %}
      <div class="col-md-3">
        <div class="card p-3 text-center
            {% if profile.current_level >= level.number %}bg-success text-white{% else %}bg-light text-muted{% endif %}">
          <h5>Level {{ level.number }}: {{ level.title }}</h5>
          <p>{{ level.description|default:"Level content" }}</p>

          {% if profile.current_level >= level.number %}
  <a href="{% url 'level_view' level.number %}" class="btn btn-sm btn-light mt-2">Open</a>
{% else %}
  <button class="btn btn-sm btn-secondary mt-2" disabled>Locked</button>
{% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
