{% extends 'base.html' %}
{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h4>Welcome, {{ profile.user.first_name|default:profile.user.username }}</h4>
      <p>{{ profile.school.name }} • Points: <strong id="points">{{ profile.points }}</strong> • Level: <strong id="level">{{ profile.current_level }}</strong></p>
    </div>
    <div>
      <a href="{% url 'logout' %}" class="btn btn-outline-secondary">Logout</a>
    </div>
  </div>

  <h5>Roadmap</h5>
  <div class="row">
    {% for level in levels %}
      <div class="col-md-2 text-center mb-3">
        <div class="p-3 rounded" style="border:1px solid #ddd; background: {% if profile.current_level >= level.number %}#e8f7e8{% else %}#f7f7f7{% endif %};">
          <h6>Level {{ level.number }}</h6>
          <p>{{ level.title|truncatechars:24 }}</p>
          {% if profile.current_level >= level.number %}
            {% if level.number == 1 %}
              <a href="{% url 'level1' %}" class="btn btn-sm btn-primary">Open</a>
            {% elif level.number == 2 %}
              <a href="{% url 'level2' %}" class="btn btn-sm btn-primary">Open</a>
            {% else %}
              <button class="btn btn-sm btn-secondary" disabled>Open</button>
            {% endif %}
          {% else %}
            <button class="btn btn-sm btn-secondary" disabled>Locked</button>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
