{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container py-4">
    <h2>{{ level.title }}</h2>
    <p>{{ level.description }}</p>

    <!-- Video embed -->
    <div class="ratio ratio-16x9 mb-3">
        <video controls id="level-video">
            <source src="{% static 'videos/eco_explorer.mp4' %}" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </div>

   <form method="post" action="{% url 'complete_level' level.number %}">
  {% csrf_token %}
  <button type="submit" class="btn btn-success mt-3">Complete Level</button>
</form>


    <a href="{% url 'student_dashboard' %}" class="btn btn-primary mt-3">Back to Dashboard</a>
</div>

<script>
    // Optional: automatically mark level complete when video ends
    const video = document.getElementById('level-video');
    const form = document.getElementById('complete-level-form');

    video.addEventListener('ended', () => {
        form.submit();
    });
</script>
{% endblock %}
